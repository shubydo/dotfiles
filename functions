# Decode JWT and print in readable format to console. 
# Usage: jwtd <MY_JWT>
jwtd() {
    if [[ -x $(command -v jq) ]]; then
         jq -R 'split(".") | .[0],.[1] | @base64d | fromjson' <<< "${1}"
         echo "Signature: $(echo "${1}" | awk -F'.' '{print $3}')"
    fi
}

# Get current IP and copy to clipboard (Mac specific)
myip() {
	curl -fSsL ifconfig.me | pbcopy
        echo "Current IP: $(pbpaste)"
}

# Upgrade all versions of tools managed via asdf: https://github.com/asdf-vm/asdf
asdfupgrade() {
	TOOLS=""
	TOOLS=($(asdf plugin list))
	echo -e "\033[4;33mCurrently installed tools: ${TOOLS[*]}\033[0m"
	for TOOL in "${TOOLS[@]}"; do
		echo -e "\033[4;33mUpgrading $TOOL\033[0m"
		asdf install "$TOOL" latest
		asdf global "$TOOL" latest	
		asdf reshim "$TOOL" latest	
		if [[ "$TOOL" == "golang" ]]; then
			echo "Setting GOROOT after reshim"
			echo "Before: GOROOT=$GOROOT"
			go version
			export GOROOT="$(asdf where golang)/go/"
			# Alias for asdf reshim golang && golang latest
			echo "After: GOROOT=$GOROOT"	
			go version
		fi

	done
	
	echo "\033[4:33mAll tools upgraded!"
}

update() {
	# Print in yellow blinking text
	echo -e "\033[4;33mUpgrade all brew packages"
	brew upgrade -v --greedy
	
	echo -e "\033[4;33mUinstall unused brew dependencies"
	brew autoremove -v
	
	echo -e "\033[4;33mRemove outdated downloads and old versions of packages" 
	brew cleanup -v --prune=all
	
	echo -e "\033[4;33mDone!"
}

kfile() {
	# loop through different kubeconfigs in $HOME/.kube and prompt user to select one 

	FILES=$(find -depth 0 "$HOME"/.kube)
	CHOICE=$1
}	
